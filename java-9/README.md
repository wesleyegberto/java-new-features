# Java 9

## JEPs

* [102](https://openjdk.java.net/jeps/102) - Process API Updates
* [110](https://openjdk.java.net/jeps/110) - HTTP 2 Client
* [143](https://openjdk.java.net/jeps/143) - Improve Contended Locking
* [158](https://openjdk.java.net/jeps/158) - Unified JVM Logging
* [165](https://openjdk.java.net/jeps/165) - Compiler Control
* [193](https://openjdk.java.net/jeps/193) - Variable Handles
* [197](https://openjdk.java.net/jeps/197) - Segmented Code Cache
* [199](https://openjdk.java.net/jeps/199) - Smart Java Compilation, Phase Two
* [200](https://openjdk.java.net/jeps/200) - The Modular JDK
* [201](https://openjdk.java.net/jeps/201) - Modular Source Code
* [211](https://openjdk.java.net/jeps/211) - Elide Deprecation Warnings on Import Statements
* [212](https://openjdk.java.net/jeps/212) - Resolve Lint and Doclint Warnings
* [213](https://openjdk.java.net/jeps/213) - Milling Project Coin
* [214](https://openjdk.java.net/jeps/214) - Remove GC Combinations Deprecated in JDK 8
* [215](https://openjdk.java.net/jeps/215) - Tiered Attribution for javac
* [216](https://openjdk.java.net/jeps/216) - Process Import Statements Correctly
* [217](https://openjdk.java.net/jeps/217) - Annotations Pipeline 2.0
* [219](https://openjdk.java.net/jeps/219) - Datagram Transport Layer Security (DTLS)
* [220](https://openjdk.java.net/jeps/220) - Modular Run-Time Images
* [221](https://openjdk.java.net/jeps/221) - Simplified Doclet API
* [222](https://openjdk.java.net/jeps/222) - jshell: The Java Shell (Read-Eval-Print Loop)
* [223](https://openjdk.java.net/jeps/223) - New Version-String Scheme
* [224](https://openjdk.java.net/jeps/224) - HTML5 Javadoc
* [225](https://openjdk.java.net/jeps/225) - Javadoc Search
* [226](https://openjdk.java.net/jeps/226) - UTF-8 Property Files
* [227](https://openjdk.java.net/jeps/227) - Unicode 7.0
* [228](https://openjdk.java.net/jeps/228) - Add More Diagnostic Commands
* [229](https://openjdk.java.net/jeps/229) - Create PKCS12 Keystores by Default
* [231](https://openjdk.java.net/jeps/231) - Remove Launch-Time JRE Version Selection
* [232](https://openjdk.java.net/jeps/232) - Improve Secure Application Performance
* [233](https://openjdk.java.net/jeps/233) - Generate Run-Time Compiler Tests Automatically
* [235](https://openjdk.java.net/jeps/235) - Test Class-File Attributes Generated by javac
* [236](https://openjdk.java.net/jeps/236) - Parser API for Nashorn
* [237](https://openjdk.java.net/jeps/237) - Linux/AArch64 Port
* [238](https://openjdk.java.net/jeps/238) - Multi-Release JAR Files
* [240](https://openjdk.java.net/jeps/240) - Remove the JVM TI hprof Agent
* [241](https://openjdk.java.net/jeps/241) - Remove the jhat Tool
* [243](https://openjdk.java.net/jeps/243) - Java-Level JVM Compiler Interface
* [244](https://openjdk.java.net/jeps/244) - TLS Application-Layer Protocol Negotiation Extension
* [245](https://openjdk.java.net/jeps/245) - Validate JVM Command-Line Flag Arguments
* [246](https://openjdk.java.net/jeps/246) - Leverage CPU Instructions for GHASH and RSA
* [247](https://openjdk.java.net/jeps/247) - Compile for Older Platform Versions
* [248](https://openjdk.java.net/jeps/248) - Make G1 the Default Garbage Collector
* [249](https://openjdk.java.net/jeps/249) - OCSP Stapling for TLS
* [250](https://openjdk.java.net/jeps/250) - Store Interned Strings in CDS Archives
* [251](https://openjdk.java.net/jeps/251) - Multi-Resolution Images
* [252](https://openjdk.java.net/jeps/252) - Use CLDR Locale Data by Default
* [253](https://openjdk.java.net/jeps/253) - Prepare JavaFX UI Controls & CSS APIs for Modularization
* [254](https://openjdk.java.net/jeps/254) - Compact Strings
* [255](https://openjdk.java.net/jeps/255) - Merge Selected Xerces 2.11.0 Updates into JAXP
* [256](https://openjdk.java.net/jeps/256) - BeanInfo Annotations
* [257](https://openjdk.java.net/jeps/257) - Update JavaFX/Media to Newer Version of GStreamer
* [258](https://openjdk.java.net/jeps/258) - HarfBuzz Font-Layout Engine
* [259](https://openjdk.java.net/jeps/259) - Stack-Walking API
* [260](https://openjdk.java.net/jeps/260) - Encapsulate Most Internal APIs
* [261](https://openjdk.java.net/jeps/261) - Module System
* [262](https://openjdk.java.net/jeps/262) - TIFF Image I/O
* [263](https://openjdk.java.net/jeps/263) - HiDPI Graphics on Windows and Linux
* [264](https://openjdk.java.net/jeps/264) - Platform Logging API and Service
* [265](https://openjdk.java.net/jeps/265) - Marlin Graphics Renderer
* [266](https://openjdk.java.net/jeps/266) - More Concurrency Updates
* [267](https://openjdk.java.net/jeps/267) - Unicode 8.0
* [268](https://openjdk.java.net/jeps/268) - XML Catalogs
* [269](https://openjdk.java.net/jeps/269) - Convenience Factory Methods for Collections
* [270](https://openjdk.java.net/jeps/270) - Reserved Stack Areas for Critical Sections
* [271](https://openjdk.java.net/jeps/271) - Unified GC Logging
* [272](https://openjdk.java.net/jeps/272) - Platform-Specific Desktop Features
* [273](https://openjdk.java.net/jeps/273) - DRBG-Based SecureRandom Implementations
* [274](https://openjdk.java.net/jeps/274) - Enhanced Method Handles
* [275](https://openjdk.java.net/jeps/275) - Modular Java Application Packaging
* [276](https://openjdk.java.net/jeps/276) - Dynamic Linking of Language-Defined Object Models
* [277](https://openjdk.java.net/jeps/277) - Enhanced Deprecation
* [278](https://openjdk.java.net/jeps/278) - Additional Tests for Humongous Objects in G1
* [279](https://openjdk.java.net/jeps/279) - Improve Test-Failure Troubleshooting
* [280](https://openjdk.java.net/jeps/280) - Indify String Concatenation
* [281](https://openjdk.java.net/jeps/281) - HotSpot C++ Unit-Test Framework
* [282](https://openjdk.java.net/jeps/282) - jlink: The Java Linker
* [283](https://openjdk.java.net/jeps/283) - Enable GTK 3 on Linux
* [284](https://openjdk.java.net/jeps/284) - New HotSpot Build System
* [285](https://openjdk.java.net/jeps/285) - Spin-Wait Hints
* [287](https://openjdk.java.net/jeps/287) - SHA-3 Hash Algorithms
* [288](https://openjdk.java.net/jeps/288) - Disable SHA-1 Certificates
* [289](https://openjdk.java.net/jeps/289) - Deprecate the Applet API
* [290](https://openjdk.java.net/jeps/290) - Filter Incoming Serialization Data
* [291](HTTPS://OPENJDK.JAVA.NET/JEPS/291) - DEPRECATE THE CONCURRENT MARK SWEEP (CMS) GARBAGE COLLECTOR
* [292](HTTPS://OPENJDK.JAVA.NET/JEPS/292) - IMPLEMENT SELECTED ECMASCRIPT 6 FEATURES IN NASHORN
* [294](HTTPS://OPENJDK.JAVA.NET/JEPS/294) - LINUX/S390X PORT
* [295](HTTPS://OPENJDK.JAVA.NET/JEPS/295) - AHEAD-OF-TIME COMPILATION
* [297](HTTPS://OPENJDK.JAVA.NET/JEPS/297) - UNIFIED ARM32/ARM64 PORT
* [298](HTTPS://OPENJDK.JAVA.NET/JEPS/298) - REMOVE DEMOS AND SAMPLES
* [299](https://openjdk.java.net/jeps/299) - Reorganize Documentation

## Features

### Language

* Milling Project Coin:
  * More concise try-with-resources statements
  * `@SafeVarargs` annotation is allowed on private instance methods
  * Use diamond syntax in conjunction with anonymous inner classes
  * Private interface methods are supported
* The underscore character is not a legal name
* Platform Logging API and Service
* Concurrency improvements
* Collections improvements
* Method handles improvements
* Project Jigsaw
  * Creating modules;
  * Exports and requires;
  * Requires transitive;
  * Using non-exported class through its exported interface;
  * Running a module.
* jlink
  * Tool to assemble and optimized our modules and their deps into a custom runtime image;
  * The runtime image will contain the JVM, only the Java modules we need and our code;
  * The runtime image is generated for the platform we are using (current jdk platform);
  * We can set --launcher option to generate a script to run a module/class.
* Unified Logging
  * `-Xlog` to give uniform access to log messages from different subsystems (class loading, threading, GC, module system, so on)

### JVM

* Compact Strings
* Improve contended locking
  * Improvement in monitor enter and exit, faster notifications
* Segmented code cache
  * Improvement of code cache by separeting in three segments: Non-method, Profiled and Non-profiled.
  * Command line params to set the size in bytes:
    * `-XX:NonMethodCodeHeapSize`
    * `-XX:ProfiledCodeHeapSize`
    * `-XX:NonProfiledCodeHeapSize`
* JShell
  * bin: `jshell`
* Compiler control
* Dynamic linking of language defined object models

## Sample Projects

The shell script uses env var JAVA9_HOME to jdk-9 dir.

### Simple Deps

The calculator module uses math_libs module.
The math_api module export an interface:

* Operation: defines an operation;

The math_lib module export a class:

* MathIntegerOperations: expose the implementations of Operation;
* Showing dependencies

To show the deps we need to set modules path if a module use any other define

```sh
$JAVA9_HOME/bin/jdeps output/mlibs/mathlib-1.0.jar
$JAVA9_HOME/bin/jdeps --module-path output/mlibs/ output/mlibs/calculator.jar
```

### Services

The provider module exposes a service Calculator using the its implementation HitchhikerCalculator.
The consumer uses the exposed service by loooking up using ServiceLoader.

## Links

* [JDK 9 Documentation](https://docs.oracle.com/javase/9/)
* [JDK 9 JEPs](https://openjdk.java.net/projects/jdk9/)
* [Virtual Hackday: Become an early Java 9 expert](https://www.youtube.com/watch?v=y868lMk6NtY)
* [Devoxx - Exploring Java 9 by Venkat Subramaniam](https://www.youtube.com/watch?v=8XmYT89fBKg)
* [jlink Reference](https://docs.oracle.com/javase/9/tools/jlink.htm)
* [Unified Logging Of JVM Messages With The -Xlog Option](https://blog.codefx.org/java/unified-logging-with-the-xlog-option/)
* [Java 9 Migration Guide](https://blog.codefx.org/java/java-9-migration-guide/)
